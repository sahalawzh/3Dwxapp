"use strict";function _defineProperty(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function getPageCtx(e){var o=e;if(!o){var t=getCurrentPages();o=t[t.length-1]}return o}function getPageModalConfig(e){return(e.data.jfk||{}).__jfkModalPageConfig||{}}function Modal(e,o,t){var r=getPageCtx(o),n=getPageModalConfig(r),a=Object.assign({},globalModalUserConfig,n,e);if(!a.selector){var l=new Error("please support modal selector");return l.type="component",Promise.reject(l)}var i=r.selectComponent(a.selector);if(!i){var g=new Error("can't find modal component");return g.type="component",Promise.reject(g)}return new Promise(function(e,o){delete a.selector,a.promiseFunc={resolve:e,reject:o},t&&(a.type=t),i.showWithOptions(a)})}var MODAL_CONFIG_KEY="jfk.__jfkModalPageConfig",globalModalUserConfig={};["alert","confirm","prompt"].forEach(function(e){Modal[e]=function(o,t){return Modal(o,t,e)}}),Modal.setDefaultOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";if("global"===o)globalModalUserConfig=Object.assign({},e);else if("page"===o){var t=getPageCtx();t.setData(_defineProperty({},""+MODAL_CONFIG_KEY,e))}},Modal.resetDefaultOptions=function(){"global"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"page")?globalModalUserConfig={}:getPageCtx().setData(_defineProperty({},""+MODAL_CONFIG_KEY,{}))},module.exports=Modal;